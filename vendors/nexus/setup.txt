export ZENOPS_HOME=/Users/aaron/zenops && echo $ZENOPS_HOME
rm -rf ${ZENOPS_HOME}/docker/nexus && mkdir -p ${ZENOPS_HOME}/docker/nexus && chmod 666 ${ZENOPS_HOME}/docker/nexus

docker run \
    -d --name nexus \
    -p 58081:8081 -p:52020:2020 -p:58082:8082 -p:58083:8083 -p:58084:8084 \
    -v ${ZENOPS_HOME}/docker/nexus/data:/nexus-data \
    --restart=always \
    my-nexus

# 仓库管理参考 https://zhuanlan.zhihu.com/p/330410597
# 认证错误参考 https://blog.csdn.net/weixin_42170236/article/details/108994123

# 推送镜像
docker pull sonatype/nexus3
docker pull gitlab/gitlab-ce
docker pull jenkins/jenkins
docker pull sonarqube:community

# 编辑/etc/hosts，加入 127.0.0.1 local.tester.im
docker tag sonatype/nexus3 local.tester.im:58083/sonatype/nexus3
docker tag gitlab/gitlab-ce local.tester.im:58083/gitlab/gitlab-ce
docker tag jenkins/jenkins local.tester.im:58083/jenkins/jenkins
docker tag sonarqube:community local.tester.im:58083/sonarqube:community

docker push local.tester.im:58083/sonatype/nexus3
docker push local.tester.im:58083/gitlab/gitlab-ce
docker push local.tester.im:58083/jenkins/jenkins
docker push local.tester.im:58083/sonarqube:community
